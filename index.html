<!DOCTYPE html>
<html>
	<head>
		<title>Control Panel</title>
		<link rel="stylesheet" href="css/index.css">

		<script type="text/javascript" src="js/MIDIEvents/MIDIEvents.js"></script>
		<script type="text/javascript" src="js/MIDIEvents/MIDIFile.js"></script>
		<script type="text/javascript" src="js/MIDIEvents/MIDIPlayer.js"></script>

		<script type="text/javascript" src="js/midimonitor.js"></script>
		<script type="text/javascript" src="js/midimonitormessage.js"></script>
		<script type="text/javascript" src="js/midimonitorinput.js"></script>
		<script type="text/javascript" src="js/midimonitoroutput.js"></script>
		<script type="text/javascript" src="js/midimonitorplayer.js"></script>
		<script type="text/javascript" src="js/midimonitorinitializer.js"></script>

		<script type="text/javascript">
			function init() {
				var sizeRatio = (2 / 3);
				var midiMonitorSpecsObject = {
					fullscreen:	1,
					titlebar:	0,
					menubar:	0,
					location:	0,
					status:		0,
					scrollbars:	0,
					width:		window.screen.width * sizeRatio,
					height:		window.screen.height * sizeRatio,
					left:		window.screen.width * (1 - sizeRatio) * (sizeRatio / 2),
					top:		window.screen.height * (1 - sizeRatio) * (sizeRatio / 2),
				};

				var midiMonitorUrl = 'midimonitor.html';
				var midiMonitorName = 'MidiMonitor';
				var midiMonitorSpecs = Object.entries(midiMonitorSpecsObject).map(
					function(arr) {
						return arr.join('=');
					}
				).join(',');

				return window.open(midiMonitorUrl, midiMonitorName, midiMonitorSpecs);
			}


			function initCanvas(canvas) {
				var midiMonitorInitializer = new MidiMonitorInitializer(canvas);
				midiMonitorInitializer.initInputDirect();
				midiMonitorInitializer.initInputFileInput(window.fileinput);
			}

		</script>
	</head>
	<body onload='init()'>
		<h1 id="title">MidiMonitor Control Panel</h1>
		<div id="controlpanel">
			<input id="fileinput" type="file" accept="audio/mid">
		</div>
	</body>
</html>
